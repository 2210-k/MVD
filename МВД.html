<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Раздел МВД</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 5px;
        }
        .password-section {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        .password-input {
            padding: 10px;
            width: 250px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 10px;
            font-size: 16px;
        }
        .btn {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .mvd-section {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        .tab.active {
            background-color: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        select.form-control {
            height: 40px;
        }
        .history-section {
            margin-top: 30px;
        }
        .history-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        .clear-history {
            margin-top: 20px;
            text-align: right;
        }
        .error {
            color: #e74c3c;
            margin-top: 10px;
        }
        .success {
            color: #27ae60;
            margin-top: 10px;
        }
        .section-title {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .fine-amount-group {
            display: none;
            margin-top: 10px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border-left: 4px solid #f1c40f;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Министерство внутренних дел</h1>
            <p>Официальный портал для служебного использования</p>
        </header>

        <div class="password-section">
            <h2>Доступ ограничен</h2>
            <p>Для входа в систему введите пароль:</p>
            <div style="margin: 20px 0;">
                <input type="password" id="passwordInput" class="password-input" placeholder="Введите пароль">
                <button id="loginBtn" class="btn">Войти</button>
            </div>
            <p id="passwordError" class="error"></p>
        </div>

        <div id="mvdContent" class="mvd-section">
            <h2 class="section-title">Система учета правоохранительной деятельности</h2>
            
            <div class="tabs">
                <div class="tab active" data-tab="database">База данных</div>
                <div class="tab" data-tab="dtp">Оформление ДТП</div>
                <div class="tab" data-tab="arrest">Отчет об аресте</div>
            </div>
            
            <div class="tab-content active" id="database">
                <h3>База данных правонарушений</h3>
                <form id="databaseForm">
                    <div class="form-group">
                        <label for="actionType">Действие:</label>
                        <select id="actionType" class="form-control" required>
                            <option value="">Выберите действие</option>
                            <option value="Остановка ТС">Остановка ТС</option>
                            <option value="Административный штраф">Административный штраф</option>
                            <option value="Арест/задержание гражданина">Арест/задержание гражданина</option>
                            <option value="Лишение права на управление ТС">Лишение права на управление ТС</option>
                        </select>
                    </div>
                    
                    <div id="fineAmountGroup" class="fine-amount-group">
                        <div class="form-group">
                            <label for="fineAmount">Сумма штрафа (руб.):</label>
                            <input type="number" id="fineAmount" class="form-control" placeholder="Укажите сумму штрафа" min="0">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="reason">Причина (статья):</label>
                        <input type="text" id="reason" class="form-control" placeholder="Укажите статью или причину" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Транспортное средство:</label>
                        <input type="text" id="vehicleBrand" class="form-control" placeholder="Марка и модель" required style="margin-bottom: 10px;">
                        <input type="text" id="vehicleColor" class="form-control" placeholder="Цвет" required style="margin-bottom: 10px;">
                        <input type="text" id="vehicleNumber" class="form-control" placeholder="Госномер" required style="margin-bottom: 10px;">
                        <select id="vehicleOwnership" class="form-control" required>
                            <option value="">Чей транспорт</option>
                            <option value="Аренда">Аренда</option>
                            <option value="Собственный">Собственный</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Владелец:</label>
                        <input type="text" id="ownerName" class="form-control" placeholder="ФИО владельца" required style="margin-bottom: 10px;">
                        <input type="text" id="ownerPassport" class="form-control" placeholder="Номер паспорта" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">Дата:</label>
                        <input type="text" id="date" class="form-control" placeholder="ДД.ММ.ГГГГ (ИГРОВОЙ ДЕНЬ)" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="author">Кто составил документ:</label>
                        <input type="text" id="author" class="form-control" placeholder="Должность и ФИО" required>
                    </div>
                    
                    <button type="submit" class="btn">Сохранить в базу</button>
                </form>
                
                <div class="history-section">
                    <h3>История базы данных</h3>
                    <div id="databaseHistory"></div>
                    <div class="clear-history">
                        <input type="password" id="clearDbPassword" class="password-input" placeholder="Пароль для очистки">
                        <button id="clearDbHistory" class="btn">Очистить историю</button>
                    </div>
                    <p id="dbClearMessage"></p>
                </div>
            </div>
            
            <div class="tab-content" id="dtp">
                <h3>Оформление дорожно-транспортного происшествия</h3>
                <form id="dtpForm">
                    <div class="form-group">
                        <label for="dtpDate">Дата и время ДТП:</label>
                        <input type="text" id="dtpDate" class="form-control" placeholder="ДД.ММ.ГГГГ ЧЧ:ММ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtpLocation">Место происшествия:</label>
                        <input type="text" id="dtpLocation" class="form-control" placeholder="Адрес или координаты" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtpParticipants">Участники ДТП:</label>
                        <textarea id="dtpParticipants" class="form-control" rows="3" placeholder="Перечислите участников (водители, пешеходы)" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtpVehicles">Транспортные средства:</label>
                        <textarea id="dtpVehicles" class="form-control" rows="3" placeholder="Марки, модели, госномера" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtpDamage">Повреждения:</label>
                        <textarea id="dtpDamage" class="form-control" rows="3" placeholder="Описание повреждений ТС и другого имущества" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtpWitnesses">Свидетели:</label>
                        <textarea id="dtpWitnesses" class="form-control" rows="2" placeholder="ФИО и контакты свидетелей"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="dtpInspector">Инспектор, оформивший ДТП:</label>
                        <input type="text" id="dtpInspector" class="form-control" placeholder="Должность и ФИО" required>
                    </div>
                    
                    <button type="submit" class="btn">Сохранить отчет</button>
                </form>
                
                <div class="history-section">
                    <h3>История оформленных ДТП</h3>
                    <div id="dtpHistory"></div>
                    <div class="clear-history">
                        <input type="password" id="clearDtpPassword" class="password-input" placeholder="Пароль для очистки">
                        <button id="clearDtpHistory" class="btn">Очистить историю</button>
                    </div>
                    <p id="dtpClearMessage"></p>
                </div>
            </div>
            
            <div class="tab-content" id="arrest">
                <h3>Отчет об аресте/задержании</h3>
                <form id="arrestForm">
                    <div class="form-group">
                        <label for="arrestedPerson">Задержанный/арестованный:</label>
                        <input type="text" id="arrestedPerson" class="form-control" placeholder="ФИО" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="arrestDate">Дата и время задержания:</label>
                        <input type="text" id="arrestDate" class="form-control" placeholder="ДД.ММ.ГГГГ ЧЧ:ММ" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="arrestLocation">Место задержания:</label>
                        <input type="text" id="arrestLocation" class="form-control" placeholder="Адрес или координаты" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="arrestReason">Причина задержания/ареста:</label>
                        <textarea id="arrestReason" class="form-control" rows="2" placeholder="Основания для задержания" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="arrestDetails">Обстоятельства задержания:</label>
                        <textarea id="arrestDetails" class="form-control" rows="3" placeholder="Подробное описание" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="arrestOfficer">Сотрудник, составивший отчет:</label>
                        <input type="text" id="arrestOfficer" class="form-control" placeholder="Должность и ФИО" required>
                    </div>
                    
                    <button type="submit" class="btn">Сохранить отчет</button>
                </form>
                
                <div class="history-section">
                    <h3>История арестов/задержаний</h3>
                    <div id="arrestHistory"></div>
                    <div class="clear-history">
                        <input type="password" id="clearArrestPassword" class="password-input" placeholder="Пароль для очистки">
                        <button id="clearArrestHistory" class="btn">Очистить историю</button>
                    </div>
                    <p id="arrestClearMessage"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Элементы DOM
            const passwordInput = document.getElementById('passwordInput');
            const loginBtn = document.getElementById('loginBtn');
            const passwordError = document.getElementById('passwordError');
            const mvdContent = document.getElementById('mvdContent');
            const passwordSection = document.querySelector('.password-section');
            const actionTypeSelect = document.getElementById('actionType');
            const fineAmountGroup = document.getElementById('fineAmountGroup');
            
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // История (в реальном приложении это бы хранилось на сервере)
            let databaseHistory = JSON.parse(localStorage.getItem('mvd_database_history')) || [];
            let dtpHistory = JSON.parse(localStorage.getItem('mvd_dtp_history')) || [];
            let arrestHistory = JSON.parse(localStorage.getItem('mvd_arrest_history')) || [];
            
            // Пароли
            const ACCESS_PASSWORD = '121212';
            const CLEAR_PASSWORD = '123456';
            
            // Инициализация
            updateHistoryDisplay();
            
            // Обработчики событий
            loginBtn.addEventListener('click', function() {
                if (passwordInput.value === ACCESS_PASSWORD) {
                    passwordError.textContent = '';
                    passwordSection.style.display = 'none';
                    mvdContent.style.display = 'block';
                } else {
                    passwordError.textContent = 'Неверный пароль. Доступ запрещен.';
                }
            });
            
            // Показать/скрыть поле суммы штрафа
            actionTypeSelect.addEventListener('change', function() {
                if (this.value === 'Административный штраф') {
                    fineAmountGroup.style.display = 'block';
                } else {
                    fineAmountGroup.style.display = 'none';
                    document.getElementById('fineAmount').value = '';
                }
            });
            
            // Переключение вкладок
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // Деактивируем все вкладки и контент
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Активируем текущую вкладку и контент
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Обработка формы базы данных
            document.getElementById('databaseForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const record = {
                    id: generateId(),
                    action: document.getElementById('actionType').value,
                    reason: document.getElementById('reason').value,
                    vehicle: {
                        brand: document.getElementById('vehicleBrand').value,
                        color: document.getElementById('vehicleColor').value,
                        number: document.getElementById('vehicleNumber').value,
                        ownership: document.getElementById('vehicleOwnership').value
                    },
                    owner: {
                        name: document.getElementById('ownerName').value,
                        passport: document.getElementById('ownerPassport').value
                    },
                    date: document.getElementById('date').value,
                    author: document.getElementById('author').value,
                    timestamp: new Date().toISOString()
                };
                
                // Добавляем сумму штрафа, если действие - административный штраф
                if (record.action === 'Административный штраф') {
                    record.fineAmount = document.getElementById('fineAmount').value;
                }
                
                databaseHistory.push(record);
                localStorage.setItem('mvd_database_history', JSON.stringify(databaseHistory));
                
                updateHistoryDisplay();
                this.reset();
                fineAmountGroup.style.display = 'none';
                
                alert('Запись успешно добавлена в базу данных!');
            });
            
            // Обработка формы ДТП
            document.getElementById('dtpForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const record = {
                    id: generateId(),
                    date: document.getElementById('dtpDate').value,
                    location: document.getElementById('dtpLocation').value,
                    participants: document.getElementById('dtpParticipants').value,
                    vehicles: document.getElementById('dtpVehicles').value,
                    damage: document.getElementById('dtpDamage').value,
                    witnesses: document.getElementById('dtpWitnesses').value,
                    inspector: document.getElementById('dtpInspector').value,
                    timestamp: new Date().toISOString()
                };
                
                dtpHistory.push(record);
                localStorage.setItem('mvd_dtp_history', JSON.stringify(dtpHistory));
                
                updateHistoryDisplay();
                this.reset();
                
                alert('Отчет о ДТП успешно сохранен!');
            });
            
            // Обработка формы ареста
            document.getElementById('arrestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const record = {
                    id: generateId(),
                    person: document.getElementById('arrestedPerson').value,
                    date: document.getElementById('arrestDate').value,
                    location: document.getElementById('arrestLocation').value,
                    reason: document.getElementById('arrestReason').value,
                    details: document.getElementById('arrestDetails').value,
                    officer: document.getElementById('arrestOfficer').value,
                    timestamp: new Date().toISOString()
                };
                
                arrestHistory.push(record);
                localStorage.setItem('mvd_arrest_history', JSON.stringify(arrestHistory));
                
                updateHistoryDisplay();
                this.reset();
                
                alert('Отчет об аресте успешно сохранен!');
            });
            
            // Очистка истории базы данных
            document.getElementById('clearDbHistory').addEventListener('click', function() {
                const password = document.getElementById('clearDbPassword').value;
                if (password === CLEAR_PASSWORD) {
                    databaseHistory = [];
                    localStorage.setItem('mvd_database_history', JSON.stringify(databaseHistory));
                    updateHistoryDisplay();
                    document.getElementById('clearDbPassword').value = '';
                    document.getElementById('dbClearMessage').textContent = 'История очищена.';
                    document.getElementById('dbClearMessage').className = 'success';
                } else {
                    document.getElementById('dbClearMessage').textContent = 'Неверный пароль для очистки.';
                    document.getElementById('dbClearMessage').className = 'error';
                }
            });
            
            // Очистка истории ДТП
            document.getElementById('clearDtpHistory').addEventListener('click', function() {
                const password = document.getElementById('clearDtpPassword').value;
                if (password === CLEAR_PASSWORD) {
                    dtpHistory = [];
                    localStorage.setItem('mvd_dtp_history', JSON.stringify(dtpHistory));
                    updateHistoryDisplay();
                    document.getElementById('clearDtpPassword').value = '';
                    document.getElementById('dtpClearMessage').textContent = 'История очищена.';
                    document.getElementById('dtpClearMessage').className = 'success';
                } else {
                    document.getElementById('dtpClearMessage').textContent = 'Неверный пароль для очистки.';
                    document.getElementById('dtpClearMessage').className = 'error';
                }
            });
            
            // Очистка истории арестов
            document.getElementById('clearArrestHistory').addEventListener('click', function() {
                const password = document.getElementById('clearArrestPassword').value;
                if (password === CLEAR_PASSWORD) {
                    arrestHistory = [];
                    localStorage.setItem('mvd_arrest_history', JSON.stringify(arrestHistory));
                    updateHistoryDisplay();
                    document.getElementById('clearArrestPassword').value = '';
                    document.getElementById('arrestClearMessage').textContent = 'История очищена.';
                    document.getElementById('arrestClearMessage').className = 'success';
                } else {
                    document.getElementById('arrestClearMessage').textContent = 'Неверный пароль для очистки.';
                    document.getElementById('arrestClearMessage').className = 'error';
                }
            });
            
            // Функция генерации ID
            function generateId() {
                return '#' + Math.random().toString(36).substr(2, 9).toUpperCase();
            }
            
            // Функция обновления отображения истории
            function updateHistoryDisplay() {
                // База данных
                const dbHistoryContainer = document.getElementById('databaseHistory');
                dbHistoryContainer.innerHTML = '';
                
                if (databaseHistory.length === 0) {
                    dbHistoryContainer.innerHTML = '<div class="history-item">История записей пуста.</div>';
                } else {
                    databaseHistory.forEach(record => {
                        const item = document.createElement('div');
                        item.className = 'history-item';
                        let html = `
                            <strong>ID: ${record.id}</strong> | ${record.action} | ${record.date}<br>
                            <strong>Причина:</strong> ${record.reason}<br>
                        `;
                        
                        // Добавляем сумму штрафа, если есть
                        if (record.fineAmount) {
                            html += `<strong>Сумма штрафа:</strong> ${record.fineAmount} руб.<br>`;
                        }
                        
                        html += `
                            <strong>ТС:</strong> ${record.vehicle.brand}, ${record.vehicle.color}, ${record.vehicle.number} (${record.vehicle.ownership})<br>
                            <strong>Владелец:</strong> ${record.owner.name}, паспорт: ${record.owner.passport}<br>
                            <strong>Автор:</strong> ${record.author}<br>
                            <small>${new Date(record.timestamp).toLocaleString()}</small>
                        `;
                        
                        item.innerHTML = html;
                        dbHistoryContainer.appendChild(item);
                    });
                }
                
                // ДТП
                const dtpHistoryContainer = document.getElementById('dtpHistory');
                dtpHistoryContainer.innerHTML = '';
                
                if (dtpHistory.length === 0) {
                    dtpHistoryContainer.innerHTML = '<div class="history-item">История ДТП пуста.</div>';
                } else {
                    dtpHistory.forEach(record => {
                        const item = document.createElement('div');
                        item.className = 'history-item';
                        item.innerHTML = `
                            <strong>ID: ${record.id}</strong> | ${record.date}<br>
                            <strong>Место:</strong> ${record.location}<br>
                            <strong>Участники:</strong> ${record.participants}<br>
                            <strong>ТС:</strong> ${record.vehicles}<br>
                            <strong>Повреждения:</strong> ${record.damage}<br>
                            <strong>Инспектор:</strong> ${record.inspector}<br>
                            <small>${new Date(record.timestamp).toLocaleString()}</small>
                        `;
                        dtpHistoryContainer.appendChild(item);
                    });
                }
                
                // Аресты
                const arrestHistoryContainer = document.getElementById('arrestHistory');
                arrestHistoryContainer.innerHTML = '';
                
                if (arrestHistory.length === 0) {
                    arrestHistoryContainer.innerHTML = '<div class="history-item">История арестов пуста.</div>';
                } else {
                    arrestHistory.forEach(record => {
                        const item = document.createElement('div');
                        item.className = 'history-item';
                        item.innerHTML = `
                            <strong>ID: ${record.id}</strong> | ${record.date}<br>
                            <strong>Задержанный:</strong> ${record.person}<br>
                            <strong>Место:</strong> ${record.location}<br>
                            <strong>Причина:</strong> ${record.reason}<br>
                            <strong>Обстоятельства:</strong> ${record.details}<br>
                            <strong>Сотрудник:</strong> ${record.officer}<br>
                            <small>${new Date(record.timestamp).toLocaleString()}</small>
                        `;
                        arrestHistoryContainer.appendChild(item);
                    });
                }
            }
        });
    </script>
</body>
</html>